PROJ    =ICS
DEBUG   =0

CC  =cl
RC  =rc
MODEL = M

CFLAGS_G_WDLL   =/EM /A$(MODEL) /W3 /Ze /D_WINDOWS /D_WINDLL  /DSTRICT /G2w /Zp /Aw
CFLAGS_D_WDLL   =/Zi /Od
CFLAGS_R_WDLL   =/O /Gs /DNDEBUG /Ogilt

LFLAGS_G_WDLL   =/NOE/A:16
LFLAGS_D_WDLL   =/CO
LFLAGS_R_WDLL   =

RCFLAGS =
RESFLAGS    =-30 -t
RUNFLAGS    =

H =     ICS.H STRINGS.H ..\RUNCOMBO\RUNCOMBO.H ..\DRAGON\DRAGON.H ..\ICONCODE\ICONCODE.H \
	..\READBMP\ICSBMP.H ..\NWCANVAS\ICCANVAS.H ..\NWSTATIC\ICSTATIC.H \
	..\NWMETER\ICMETER.H

RESFILES =  ABOUT.DLG CLOSEAPP.DLG OOPS.DLG REGISTER.DLG ..\BITMAPS\BTNS9030.BMP \
	..\BITMAPS\YESNOCNC.BMP ..\BITMAPS\TASKS.BMP

DEFFILE =   ICS.DEF
OBJS_EXT =
LIBS_EXT =

!if $(DEBUG) == 0
CFLAGS  = -c $(CFLAGS_G_WDLL) $(CFLAGS_R_WDLL)
LFLAGS  =$(LFLAGS_G_WDLL) $(LFLAGS_R_WDLL)
!else
CFLAGS  = -c $(CFLAGS_G_WDLL) $(CFLAGS_D_WDLL)
LFLAGS  =$(LFLAGS_G_WDLL) $(LFLAGS_D_WDLL)
!endif

.rc.res: ; $(RC) $(RCFLAGS) -r $*.rc

all:    $(PROJ).DLL ICCUSTOM.OBJ DRAGNDRP.OBJ ICSBMP.OBJ ICONCODE.OBJ RUNCOMBO.OBJ STRINGS.OBJ \
	ICCANVAS.OBJ ICSTATIC.OBJ ICMETER.OBJ

ICS.OBJ:    ICS.C $(H)

ICS.RES:    ICS.RC $(RESFILES) $(H)

ICCUSTOM.OBJ:   ICCUSTOM.C $(H)

STRINGS.OBJ:    STRINGS.C $(H)

RUNCOMBODIR = ..\RUNCOMBO

RUNCOMBO.OBJ:   $(RUNCOMBODIR)\RUNCOMBO.C $(H)
 cd $(RUNCOMBODIR)
 $(CC) $(CFLAGS) RUNCOMBO.C
 cd ..\NWSDLL

DRAGONDIR = ..\DRAGON

DRAGNDRP.OBJ:   $(DRAGONDIR)\DRAGNDRP.C $(H)
 cd $(DRAGONDIR)
 $(CC) $(CFLAGS) DRAGNDRP.C
 cd ..\NWSDLL

ICSBMPDIR = ..\READBMP

ICSBMP.OBJ:   $(ICSBMPDIR)\ICSBMP.C $(H)
 cd $(ICSBMPDIR)
 $(CC) $(CFLAGS) ICSBMP.C
 cd ..\NWSDLL

ICONCODEDIR = ..\ICONCODE

ICONCODE.OBJ:   $(ICONCODEDIR)\ICONCODE.C $(H)
 cd $(ICONCODEDIR)
 $(CC) $(CFLAGS) ICONCODE.C
 cd ..\NWSDLL

DLLDLGS.OBJ:    DLLDLGS.C $(H)

ICCANVASDIR = ..\NWCANVAS
ICCANVAS.OBJ:   $(ICCANVASDIR)\ICCANVAS.C $(H)
 cd $(ICCANVASDIR)
 $(CC) $(CFLAGS) ICCANVAS.C
 cd ..\NWSDLL

STATICDIR = ..\NWSTATIC
ICSTATIC.OBJ:   $(STATICDIR)\ICSTATIC.C $(H)
 cd $(STATICDIR)
 $(CC) $(CFLAGS) ICSTATIC.C
 cd ..\NWSDLL

METERDIR = ..\NWMETER
ICMETER.OBJ:   $(METERDIR)\ICMETER.C $(H)
 cd $(METERDIR)
 $(CC) $(CFLAGS) ICMETER.C
 cd ..\NWSDLL

CHECKDIR = ..\ICCHECK
ICCHECK.OBJ:   $(CHECKDIR)\ICCHECK.C $(H)
 cd $(CHECKDIR)
 $(CC) $(CFLAGS) ICCHECK.C
 cd ..\NWSDLL


$(PROJ).DLL::    ICS.OBJ ICCUSTOM.OBJ STRINGS.OBJ RUNCOMBO.OBJ DRAGNDRP.OBJ ICONCODE.OBJ ICSBMP.OBJ \
	ICCANVAS.OBJ ICCHECK.OBJ ICSTATIC.OBJ DLLDLGS.OBJ ICMETER.OBJ $(OBJS_EXT) $(DEFFILE)
	echo >NUL @<<$(PROJ).CRF
libentry.obj +
ICS.OBJ +
ICCUSTOM.OBJ +
STRINGS.OBJ +
$(RUNCOMBODIR)\RUNCOMBO.OBJ +
$(DRAGONDIR)\DRAGNDRP.OBJ +
$(ICSBMPDIR)\ICSBMP.OBJ +
$(ICONCODEDIR)\ICONCODE.OBJ +
$(ICCANVASDIR)\ICCANVAS.OBJ +
$(STATICDIR)\ICSTATIC.OBJ +
$(METERDIR)\ICMETER.OBJ+
$(CHECKDIR)\ICCHECK.OBJ +
DLLDLGS.OBJ +
$(OBJS_EXT)
$(PROJ).DLL

/NOD $(MODEL)dllcew  e:\lib\bttncur libw $(MODEL)nocrt
$(DEFFILE);
<<
	link $(LFLAGS) @$(PROJ).CRF
	rc $(RESFLAGS) ICS.RES $(PROJ).DLL
	implib ICS.lib $(DEFFILE)

$(PROJ).DLL::   ICS.RES
	rc $(RESFLAGS) ICS.RES $(PROJ).DLL


#end of make file
